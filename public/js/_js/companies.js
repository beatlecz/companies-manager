// Generated by CoffeeScript 1.6.3
var CompaniesCtrl, CompanyCtrl;

CompaniesCtrl = function($scope, Api) {
  var loadData;
  loadData = function() {
    return $scope.companies = Api.companies.query();
  };
  $scope["delete"] = function(c) {
    return c.$delete({
      id: c.id
    }, function() {
      return loadData();
    });
  };
  return loadData();
};

CompanyCtrl = function($scope, Api, $routeParams, $log) {
  if ($routeParams.id === 'new') {
    $scope.editing = true;
    $scope.isNew = true;
    $scope.company = new Api.companies();
  } else {
    $scope.editing = false;
    $scope.company = Api.companies.get({
      id: $routeParams.id
    }, function() {
      return $scope.owners = Api.owners.query({
        company_id: $scope.company.id
      });
    });
  }
  $scope.editToggle = function() {
    return $scope.editing = !$scope.editing;
  };
  return $scope.save = function(c) {
    return c.$save({
      id: c.id
    }, function() {
      return $scope.editing = false;
    });
  };
};
