// Generated by CoffeeScript 1.6.3
var OwnersCtrl;

OwnersCtrl = function($scope, Api, $routeParams, $upload) {
  $scope.owner = new Api.owners({
    company_id: $routeParams.company_id
  });
  $scope.loadData = function() {
    return $scope.owners = Api.owners.query({
      company_id: $routeParams.company_id
    });
  };
  $scope.fileSelected = function($files) {
    return $scope.attachment = $files[0];
  };
  $scope["delete"] = function(o) {
    return o.$delete(function() {
      return $scope.loadData();
    });
  };
  $scope.save = function(o) {
    return o.$save(function() {
      $upload.upload({
        url: '/companies/' + o.company_id + '/owners/' + o.id + '/attachments',
        file: $scope.attachment
      });
      o = new Api.owners({
        company_id: $routeParams.company_id
      });
      return $scope.loadData();
    });
  };
  return $scope.loadData();
};
